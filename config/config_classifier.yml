# ============================================================
# CONFIGURAZIONE PRINCIPALE DEL SISTEMA BIOMETRICO SSL
# ============================================================

paths:
  base_dir: ./config
  root_dir: ..
  dataset_path: ./dataset/
  save_dir: ./classifier/save_models
  figures_dir: ./classifier/figures
  sorted_dir: ./dataset/sorted_dataset

# ============================================================
# CONFIGURAZIONE SSL
# ============================================================

ssl:
  dataset:
    batch_size: 16
    num_workers: 8
    seed: 42

  model:
    backbone: tf_efficientnetv2_s.in21k
    embedding_dim: 756
    proj_hidden_dim: 512
    proj_output_dim: 256
    proj_num_layers: 2
    freeze_backbone: true

  training:
    epochs: 3
    lr: 0.00001
    temperature: 0.5
    optimizer: adam
    weight_decay: 0.00001
    gradient_clip: 1.0
    amp: false
    save_every: 30
    warmup_epochs: 5

  clustering:
    n_clusters: 8
    min_cluster_size: 8
    cluster_metric: cosine
    dim_reduction: pca
    dim: 100

  logging:
    log_file: ./classifier/save_models/train.log
    save_dir: ./classifier/save_models
    figures_dir: ./classifier/figures

  visualization:
    visualize_tsne: true
    visualize_umap: true


# ============================================================
# CONFIGURAZIONE PER ORDINAMENTO E ANALISI CLUSTER
# ============================================================

sorted:
  input:
    csv_path: classifier/save_models/id_clusters.csv
    dataset_root:
      - dataset/DBII
      - dataset/NIST
    embeddings_path: classifier/save_models/embeddings.pth

  output:
    output_dir: dataset/sorted_dataset
    copy_mode: true
    overwrite_existing: false

  metrics:
    compute_metrics: true
    max_missing_display: 10

  visualization:
    save_cluster_figures: true
    figure_format: jpg
